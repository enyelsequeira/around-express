(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a.p+"static/media/SVGHEADER.3e6893cd.svg"},14:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(19),a(5)),s=a(7),i=a(6),m=a.n(i),u=a(10),d=a(1),_=a(11),f=a.n(_),p=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("a",{className:"header__link",href:"/"},r.a.createElement("img",{src:f.a,alt:"logo",className:"header__logo"})))},h=r.a.createContext(),b=function(e){var t=e.card,a=(e.setCards,e.onCardClick),n=e.onCardLike,o=e.onCardDelete,c=r.a.useContext(h),l=t.owner._id===c._id,s="elements__trash ".concat(l?"elements__trash_visible":"elements__trash_hidden"),i=t.likes.some((function(e){return e._id===c._id}));return r.a.createElement("li",{className:"elements__item"},r.a.createElement("div",{className:"elements__image",onClick:function(){a(t)},style:{backgroundImage:"url(".concat(t.link,")")}}),l&&r.a.createElement("button",{className:s,type:"button",onClick:function(e){o(t),e.stopPropagation()}}),r.a.createElement("div",{className:"elements__info"},r.a.createElement("h3",{className:"elements__title"},t.name),r.a.createElement("button",{onClick:function(){n(t)},className:i?"elements__image-heart_active elements__image-heart ":"elements__image-heart",type:"button",name:"like"}),r.a.createElement("h4",{className:"elements__like-count"},t.likes.length)))},v=function(e){var t=e.onEditAvatar,a=e.onEditProfile,n=e.onAddCard,o=e.onCardLike,c=e.onCardClick,l=e.onCardDelete,s=e.cards,i=r.a.useContext(h);return r.a.createElement("main",null,r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__avatar"},r.a.createElement("img",{className:"profile__avatar-image",src:i.avatar,alt:"profile"}),r.a.createElement("button",{className:"profile__avatar-overlay",onClick:t})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h2",{className:"profile__name"},i.name),r.a.createElement("p",{className:"profile__profession"},i.about),r.a.createElement("button",{className:"profile__info-btn",type:"button",onClick:a})),r.a.createElement("button",{className:"profile__button-add",onClick:n})),r.a.createElement("section",{className:"elements"},r.a.createElement("ul",{className:"elements__list"},s.map((function(e,t){return r.a.createElement(b,{key:t,card:e,onCardLike:function(e){o(e)},onCardClick:function(e){c(e)},onCardDelete:function(e){l(e)}})})))))},E=function(e){var t=e.isOpen,a=e.popupType,n=e.onClose,o=e.heading,c=e.buttonText;return r.a.createElement("div",{className:"".concat(a,t?" modal_active modal":" modal ")},r.a.createElement("div",{className:"modal__info"},r.a.createElement("button",{className:"modal__close","aria-label":"close modal","data-close":!0,type:"button",onClick:n}),r.a.createElement("p",{className:"modal__title"}," ",o),r.a.createElement("form",{className:"modal__form"},r.a.createElement("button",{className:"modal__save-button modal__save",value:"save",type:"button"},c))))},g=function(e){var t=e.isOpen,a=e.popupType,o=e.onClose,c=e.heading,l=e.buttonText,s=e.onAddPlace,i=Object(n.useState)(""),m=Object(d.a)(i,2),u=m[0],_=m[1],f=Object(n.useState)(""),p=Object(d.a)(f,2),h=p[0],b=p[1];return r.a.createElement("div",{className:"".concat(a,t?" modal_active modal":" modal ")},r.a.createElement("div",{className:"modal__info"},r.a.createElement("button",{className:"modal__close","aria-label":"close modal","data-close":!0,type:"button",onClick:o}),r.a.createElement("p",{className:"modal__title"}," ",c),r.a.createElement("form",{className:"modal__form",onSubmit:function(e){e.preventDefault(),s({name:u,link:h})}},r.a.createElement("input",{id:"card-title",className:"modal__form-name modal__form-title  modal__input",type:"text",name:"Title",value:u,onChange:function(e){_(e.target.value)},placeholder:"title",required:!0,maxLength:"30",minLength:"1"}),r.a.createElement("span",{id:"card-title-error",className:"modal__formerror"}),r.a.createElement("input",{id:"card-url",type:"url",className:"modal__form-profession modal__form-link  modal__input",name:"Imagelink",placeholder:"image",value:h,onChange:function(e){b(e.target.value)},required:!0}),r.a.createElement("span",{id:"card-url-error",className:"modal__formerror"}),r.a.createElement("button",{className:"modal__save-button modal__save",type:"submit",value:"save"},l))))},C=a(2),N=function(e){var t,a,o=e.isOpen,c=e.popupType,l=e.onClose,s=e.heading,i=e.buttonText,m=e.updateUser,u=Object(n.useContext)(h),_=Object(n.useState)(""),f=Object(d.a)(_,2),p=f[0],b=f[1],v=Object(n.useState)(""),E=Object(d.a)(v,2),g=E[0],N=E[1];return r.a.createElement("div",{className:"".concat(c,o?" modal_active modal":" modal")},r.a.createElement("div",{className:"modal__info"},r.a.createElement("button",{className:"modal__close","aria-label":"close modal","data-close":!0,type:"button",onClick:l}),r.a.createElement("p",{className:"modal__title"}," ",s),r.a.createElement("form",{className:"modal__form",onSubmit:function(e){e.preventDefault(),m(p,g)}},r.a.createElement("input",(t={id:"profile-name",className:"modal__form-name modal__input",type:"text",name:"name",onChange:function(e){return b(e.target.value)},placeholder:"Jacques",required:!0,maxLength:"40",minLength:"2"},Object(C.a)(t,"onChange",(function(e){b(e.target.value)})),Object(C.a)(t,"defaultValue",u.name),t)),r.a.createElement("span",{id:"profile-name-error",className:"modal__formerror"}),r.a.createElement("input",(a={onChange:function(e){N(e.target.value)},id:"profile-text",className:"modal__form-profession modal__input",type:"text",name:"job"},Object(C.a)(a,"onChange",(function(e){return N(e.target.value)})),Object(C.a)(a,"placeholder","Explorer"),Object(C.a)(a,"required",!0),Object(C.a)(a,"maxLength","200"),Object(C.a)(a,"minLength","2"),Object(C.a)(a,"defaultValue",u.about),a)),r.a.createElement("span",{id:"profile-text-error",className:"modal__formerror"}),r.a.createElement("button",{className:"modal__save-button modal__save",type:"submit",value:"save"},i))))},j=function(e){var t=e.isOpen,a=e.popupType,o=e.onClose,c=e.heading,l=e.buttonText,s=e.onUpdateAvatar,i=Object(n.useContext)(h),m=Object(n.useState)(i.avatar),u=Object(d.a)(m,2),_=u[0],f=u[1],p=Object(n.useRef)(_);return r.a.createElement("div",{className:"".concat(a,t?" modal_active modal":" modal ")},r.a.createElement("div",{className:"modal__info"},r.a.createElement("button",{className:"modal__close","aria-label":"close modal","data-close":!0,type:"button",onClick:o}),r.a.createElement("p",{className:"modal__title"}," ",c),r.a.createElement("form",{className:"modal__form",onSubmit:function(e){e.preventDefault(),s(_)}},r.a.createElement("input",{ref:p,onChange:function(e){f(p.current.value)},id:"profile-url",type:"url",className:"modal__form-profession modal__form-link modal__form-avatar  modal__input",name:"Imagelink",placeholder:"Image Link",required:!0}),r.a.createElement("span",{id:"profile-url-error",className:"modal__formerror"}),r.a.createElement("button",{className:"modal__save-button modal__save",type:"submit",value:"save"},l))))},k=function(e){var t=e.card,a=e.onClose;return r.a.createElement("div",{className:"modal figure  ".concat(""!==t?"modal figure modal_active":"")},r.a.createElement("div",{className:"modal__figure-container"},r.a.createElement("button",{className:"modal__close modal__figure-exit",onClick:a}),r.a.createElement("img",{className:"modal__figure-image",src:"".concat(t.link),alt:t.name}),r.a.createElement("p",{className:"modal__figure-caption"},t.name)))},O=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__text"}," \xa9 2020 Around The U.S "))},y=a(12),x=a(13),T=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(y.a)(this,e),this._baseUrl=a,this._headers=n}return Object(x.a)(e,[{key:"getCardList",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.statusText))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.statusText))}))}},{key:"getPageInfo",value:function(){return Promise.all([this.getCardList(),this.getUserInfo()])}},{key:"setUserInfo",value:function(e){var t=e.name,a=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:a})}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.statusText))}))}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.statusText))}))}},{key:"getAppInfo",value:function(){}},{key:"addCard",value:function(e){var t=e.name,a=e.link;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:a})}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.statusText))}))}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.statusText))}))}},{key:"changeLikeCardStatus",value:function(e,t){return(t?fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"}):fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"})).then((function(e){return e.ok?e.json():Promise.reject("error".concat(e.statusText))}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-3",headers:{authorization:"9a4eb9c4-eb35-4130-9822-f1a4ffd479bc","Content-Type":"application/json"}}),S=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),i=Object(d.a)(c,2),_=i[0],f=i[1],b=Object(n.useState)(!1),C=Object(d.a)(b,2),y=C[0],x=C[1],S=Object(n.useState)(!1),U=Object(d.a)(S,2),P=U[0],L=U[1],A=Object(n.useState)({avatar:"",name:"",about:""}),I=Object(d.a)(A,2),D=I[0],w=I[1],q=Object(n.useState)([]),J=Object(d.a)(q,2),H=J[0],V=J[1],R=Object(n.useState)(""),z=Object(d.a)(R,2),B=z[0],G=z[1],F=function(){var e=Object(u.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.likes.some((function(e){return e._id===D._id})),e.next=3,T.changeLikeCardStatus(t._id,!a);case 3:return e.t0=V,e.next=6,T.getCardList();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){T.getUserInfo().then((function(e){w(e)})).catch((function(e){return console.log(e)}))}),[]),Object(n.useEffect)((function(){T.getCardList().then((function(e){V(e)})).catch((function(e){return console.log(e)}))}),[V,H]);function K(){o(!1),f(!1),x(!1),G("")}return r.a.createElement("div",{className:"page"},r.a.createElement(h.Provider,{value:D},r.a.createElement(p,null),r.a.createElement(v,{onEditProfile:function(){o(!0)},onAddCard:function(){x(!0)},onEditAvatar:function(){f(!0)},selectedCard:B,onClose:K,cards:H,onCardLike:F,onCardDelete:function(e){T.removeCard(e._id).then((function(){return V(Object(s.a)(H))})).catch((function(e){return console.log(e)}))},onCardClick:function(e){return function(e){G(e)}(e)}}),r.a.createElement(N,{heading:"Edit Profile",buttonText:"Save",popupType:"modal__edit",isOpen:a,onClose:function(){return o(!1)},updateUser:function(e,t){T.setUserInfo({name:e,about:t}).then((function(e){console.log(e),w(Object(l.a)({},D,{name:e.name,about:e.about}))})).then((function(){K()})).catch((function(e){return console.log(e)}))}}),r.a.createElement(g,{heading:"New Place",buttonText:"Create",popupType:"modal__card",isOpen:y,setCards:V,onClose:function(){return x(!1)},onAddPlace:function(e){T.addCard(e).then((function(e){return V([].concat(Object(s.a)(H),[e]))})).then((function(){K()})).catch((function(e){return console.log(e)}))}}),r.a.createElement(E,{heading:"Are you sure",buttonText:"yes",popupType:"modal__deleteimage",isOpen:P,setCards:V,onClose:function(){return L(!1)}}),r.a.createElement(j,{heading:"Change Profile Picture",buttonText:"Save",popupType:"modal__addimage",setCurrentUser:w,isOpen:_,onClose:function(){return f(!1)},onUpdateAvatar:function(e){w(Object(l.a)({},D,{avatar:e})),T.setUserAvatar({avatar:e}).then((function(){K()})).catch((function(e){return console.log(e)}))}}),r.a.createElement(k,{onClose:K,card:B}),r.a.createElement(O,null)))};c.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.a9cfd721.chunk.js.map